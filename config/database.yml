default: &default
  adapter: postgresql
  encoding: unicode
  pool: <%= ENV.fetch("RAILS_MAX_THREADS") { 5 } %>
  username: <%= ENV.fetch("DATABASE_USERNAME") { "postgres" } %>
  password: <%= ENV.fetch("DATABASE_PASSWORD") { "" } %>
  host: <%= ENV.fetch("DATABASE_HOST") { "localhost" } %>
  # connect_timeout: seconds to wait for DB connection (avoids hanging on unreachable host)
  connect_timeout: <%= ENV.fetch("DB_CONNECT_TIMEOUT_SECONDS", "5") %>
  # statement_timeout: ms; cancels long-running queries (avoids one query blocking the app)
  variables:
    statement_timeout: <%= ENV.fetch("DB_STATEMENT_TIMEOUT_MS", "5000") %>

development:
  <<: *default
  database: mini_payment_gateway_development

test:
  <<: *default
  database: mini_payment_gateway_test

production:
  <<: *default
  database: mini_payment_gateway_production
  username: <%= ENV["DATABASE_USERNAME"] %>
  password: <%= ENV["DATABASE_PASSWORD"] %>
